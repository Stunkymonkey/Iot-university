digraph G {
    graph [label="PDDL", splines=ortho]
    node [shape=box]
    rankdir=LR;
    compound=true;

    /* Sensors */
    temp    [label="Temperature", shape="square", style=filled, color=lightblue, fixedsize=true, width=2]
    humid   [label="Humidity", shape="square", style=filled, color=lightblue, fixedsize=true, width=2]
    pcount  [label="Person counter section n", shape="square", style=filled, color=lightblue, fixedsize=true, width=2]
    shelf   [label="Shelf in section n", shape="square", style=filled, color=lightblue, fixedsize=true, width=2]
        index   [label="Heatindex", shape="oval", style=filled, color=lightblue]
    /* Actuators */
    gateO   [label="Gate outside", shape="square", style=filled, color=orange, fixedsize=true, width=2]
    gateI   [label="Section gate n", shape="square", style=filled, color=orange, fixedsize=true, width=2]
    vent    [label="Ventilator", shape="square", style=filled, color=orange, fixedsize=true, width=2]
    bot     [label="Telegram Bot", shape="square", style=filled, color=orange, fixedsize=true, width=2]/* Relationships */

    /* Logic operators */
    and1    [label= "&", shape="diamond", color="black", style=filled, color=grey, fixedsize=true, width=1]
    and2    [label= "&", shape="diamond", color="black", style=filled, color=grey, fixedsize=true, width=1]
    and3    [label= "&", shape="diamond", color="black", style=filled, color=grey, fixedsize=true, width=1]
    
    or1     [label= "OR", shape="diamond", color="black", style=filled, color=grey, fixedsize=true, width=1]
    or2     [label= "OR", shape="diamond", color="black", style=filled, color=grey, fixedsize=true, width=1]

    sum     [label= "SUM", shape="diamond", color="black", style=filled, color=grey, fixedsize=true, width=1]

    b1      [label= ">27", shape="diamond", color="black", style=filled, color=grey, fixedsize=true, width=1]
    b2      [label= ">0", shape="diamond", color="black", style=filled, color=grey, fixedsize=true, width=1]
    b3      [label= ">20", shape="diamond", color="black", style=filled, color=grey, fixedsize=true, width=1]
    b4      [label= ">7", shape="diamond", color="black", style=filled, color=grey, fixedsize=true, width=1]
    s1      [label= "<=32", shape="diamond", color="black", style=filled, color=grey, fixedsize=true, width=1]
    s2      [label= "<=0", shape="diamond", color="black", style=filled, color=grey, fixedsize=true, width=1]
    is      [label= "isEmpty", shape="diamond", color="black", style=filled, color=grey, fixedsize=true, width=1]
    
    temp -> {index} [splines=ortho]
    humid -> index
    index -> b1
    b1 -> and1
    pcount -> b2
    b2 -> and1
    and1 -> vent
    index -> s1
    pcount -> b4
    shelf -> is
    pcount -> sum
    sum -> b3
    s1 -> or1
    b3 -> or1
    or1 -> gateO
    pcount -> s2
    b4 -> or2
    is -> or2
    or2 -> gateI
    s2 -> and2
    is -> and2
    and2 -> bot
    is -> and3
    and3 -> gateO

    
    /* Ranks */
    { rank=min; temp, humid, pcount, shelf; }
    { rank=max; gateO, gateI, vent, bot; }
}